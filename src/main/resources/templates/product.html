<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="UTF-8">
<title>Solar Products - SolarTech India</title>
<style>
    /* Enhanced product card styling */
    .product-card {
        transition: all 0.3s ease;
        border: none !important;
        overflow: hidden;
    }
    
    .product-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15) !important;
    }
    
    .product-image {
        height: 220px;
        object-fit: contain;
        padding: 1rem;
        background-color: #f8f9fa;
        transition: all 0.3s ease;
    }
    
    .product-card:hover .product-image {
        transform: scale(1.05);
    }
    
    .product-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 10;
    }
    
    .category-sidebar {
        position: sticky;
        top: 100px;
    }
    
    .category-item {
        transition: all 0.2s ease;
        border-radius: 8px;
        margin-bottom: 8px;
    }
    
    .category-item:hover {
        background-color: #e9ecef;
        transform: translateX(5px);
    }
    
    .category-item.active {
        background-color: var(--primary-color);
        color: white;
    }
    
    .pricing-info {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }
    
    .current-price {
        color: var(--primary-color);
    }
    
    .original-price {
        color: #6c757d;
        font-size: 0.9rem;
    }
    
    .search-container {
        background: linear-gradient(135deg, #3498db, #1e40af);
        border-radius: 15px;
        padding: 2rem;
        margin-bottom: 2rem;
    }
    
    .search-input {
        border-radius: 50px;
        padding-left: 20px;
        height: 50px;
        font-size: 1.1rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .search-btn {
        border-radius: 50px;
        padding: 10px 25px;
        background: #fff;
        color: #3498db;
        font-weight: 600;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }
    
    .search-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        background: #f8f9fa;
    }
    
    .page-link {
        color: var(--primary-color);
        border-color: #dee2e6;
        margin: 0 3px;
        border-radius: 5px;
    }
    
    .page-item.active .page-link {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
    }
    
    .product-title {
        height: 50px;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }
    
    .product-link {
        text-decoration: none;
        color: inherit;
        display: block;
    }
    
    .product-link:hover {
        color: inherit;
    }
</style>
</head>
<body>
	<section>
		<!-- Search Section -->
		<div class="search-container mb-4">
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-lg-8">
						<h2 class="text-white text-center mb-3">Find the Perfect Solar Solution</h2>
						<p class="text-white text-center mb-4">Browse our extensive catalog of high-quality solar products made in India</p>
						<form action="/products" method="get">
							<div class="input-group">
								<input type="text" class="form-control search-input" name="ch" placeholder="Search for solar panels, inverters, batteries..." autocomplete="off">
								<button class="btn search-btn ms-2">
									<i class="fa-solid fa-magnifying-glass me-2"></i> Search
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="row">
				<!-- Category Sidebar -->
				<div class="col-lg-3 mb-4">
					<div class="card shadow-sm rounded-3 border-0 category-sidebar">
						<div class="card-body p-3">
							<h5 class="gradient-text mb-3"><i class="fas fa-filter me-2"></i>Categories</h5>
							<div class="india-accent mb-3"></div>
							<div class="list-group list-group-flush">
								<a href="/products"
									th:classappend="${paramValue==''} ? 'active fw-bold bg-primary text-white':''"
									class="list-group-item category-item d-flex align-items-center"
									aria-current="true">
									<i class="fas fa-th-large me-2"></i> All Products
								</a> 
								<a th:each="c:${categories}"
									th:href="@{'/products?category='+${c.name}}"
									th:classappend="${paramValue == c.name} ? 'active fw-bold bg-primary text-white':''"
									class="list-group-item category-item d-flex align-items-center">
									<i class="fas fa-tag me-2"></i> [[${c.name}]]
								</a>
							</div>
							
							<div class="mt-4">
								<div class="card bg-light border-0 rounded-3 p-2">
									<div class="card-body p-2">
										<h6 class="text-primary mb-2"><i class="fas fa-info-circle me-1"></i> Made in India</h6>
										<div class="india-accent mb-2"></div>
										<p class="small mb-0">Our products support the Atmanirbhar Bharat initiative and come with government subsidies.</p>
									</div>
								</div>
							</div>
							
							<div class="mt-4">
								<div class="card bg-primary text-white border-0 rounded-3 p-2">
									<div class="card-body p-2">
										<h6 class="mb-2"><i class="fas fa-calculator me-1"></i> Solar Calculator</h6>
										<div class="bg-white mb-2" style="height: 2px; opacity: 0.3;"></div>
										<p class="small mb-2">Find the right solar system for your needs</p>
										<a href="/calculator" class="btn btn-sm btn-light w-100">Calculate Now</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<!-- Product Grid -->
				<div class="col-lg-9">
					<div class="card border-0 shadow-sm rounded-3 mb-4">
						<div class="card-body p-4">
							<h3 class="gradient-text text-center mb-3"><i class="fas fa-solar-panel me-2"></i>Indian Solar Solutions</h3>
							<div class="india-accent mb-3 mx-auto" style="max-width: 150px;"></div>
							<p class="text-center text-muted mb-4">High-quality solar products designed for Indian homes and businesses</p>
							
							<div class="row g-4">
								<th:block th:if="${productsSize > 0}">
									<div class="col-md-6 col-lg-4" th:each="p:${products}">
										<a th:href="@{'/product/'+${p.id}}" class="product-link">
											<div class="product-card card h-100 shadow-sm rounded-3 overflow-hidden">
												<div class="position-relative">
													<img th:src="@{'/img/product_img/'+${p.image}}"
														class="product-image card-img-top" alt="Solar Product"
														loading="lazy">
													<div class="product-badge" th:if="${p.discount > 0}">
														<span class="badge bg-success rounded-pill px-3 py-2">[[${p.discount}]]% OFF</span>
													</div>
												</div>
												<div class="card-body d-flex flex-column p-3">
													<h5 class="card-title product-title text-center mb-3">[[${p.title}]]</h5>
													<div class="pricing-info mb-3">
														<span class="current-price fw-bold fs-5">₹[[${p.discountPrice}]]</span>
														<span class="original-price text-decoration-line-through" th:if="${p.discount > 0}">₹[[${p.price}]]</span>
													</div>
													<div class="mb-3 text-center">
														<span class="badge bg-primary rounded-pill px-2 py-1">Made in India</span>
														<span class="badge bg-info rounded-pill px-2 py-1" th:if="${p.category == 'Residential' || p.category == 'Commercial'}">Subsidy Available</span>
													</div>
													<div class="text-center mt-auto">
														<span class="btn btn-primary btn-sm rounded-pill px-4">
															<i class="fas fa-info-circle me-2"></i>View Details
														</span>
													</div>
												</div>
											</div>
										</a>
									</div>
								</th:block>
								
								<th:block th:unless="${productsSize>0}">
									<div class="col-12 text-center py-5">
										<i class="fas fa-search fa-3x text-secondary mb-3"></i>
										<p class="fs-4 text-danger">No products found matching your criteria</p>
										<a href="/products" class="btn btn-primary mt-3">
											<i class="fas fa-sync-alt me-2"></i>View All Products
										</a>
									</div>
								</th:block>
							</div>
						</div>
					</div>
					
					<!-- Disclaimer -->
					<div class="card border-0 shadow-sm rounded-3 mb-4 bg-light">
						<div class="card-body p-3 small">
							<p class="mb-0"><i class="fas fa-info-circle me-1 text-primary"></i> <strong>Note:</strong> All prices include GST. Products eligible for government subsidies are marked accordingly. Terms and conditions apply.</p>
						</div>
					</div>
					
					<!-- Pagination -->
					<div class="card border-0 shadow-sm rounded-3 mb-4" th:if="${productsSize>0}">
						<div class="card-body p-3">
							<div class="row align-items-center">
								<div class="col-md-4">
									<p class="mb-0"><i class="fas fa-box me-2"></i>Total Products: <span class="fw-bold">[[${totalElements}]]</span></p>
								</div>
								<div class="col-md-8">
									<nav aria-label="Product pagination" th:if="${productsSize>0}">
										<ul class="pagination justify-content-end mb-0">
											<li class="page-item"
												th:classappend="${isFirst} ? 'disabled':''">
												<a class="page-link"
												th:href="@{'/products?pageNo='+${pageNo-1}}"
												aria-label="Previous"> 
													<span aria-hidden="true">&laquo;</span>
												</a>
											</li>

											<li th:each="i:${#numbers.sequence(1,totalPages)}"
												class="page-item" th:classappend="${pageNo+1==i}?'active':''">
												<a class="page-link"
												th:href="@{'/products?pageNo='+${i-1}}">[[${i}]]</a>
											</li>

											<li class="page-item"
												th:classappend="${isLast} ? 'disabled':''">
												<a class="page-link"
												th:href="@{'/products?pageNo='+${pageNo+1}}"
												aria-label="Next"> 
													<span aria-hidden="true">&raquo;</span>
												</a>
											</li>
										</ul>
									</nav>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>
</html>